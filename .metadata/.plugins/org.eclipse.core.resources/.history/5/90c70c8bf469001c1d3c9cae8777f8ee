<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="boardMapper">

<!-- Qna 게시글 수 출력 -->
<select id="countQna" resultType="int">
select count(*) from board where board_board='qna'
</select>

<!-- 페이징 처리 후 QNA 조회 -->
<select id="selectQna" resultMap="BoardVO">
SELECT * 
			FROM (
				SELECT ROWNUM RN, A.* 
					FROM (
							select * from board where board_board='qna'
						) A
				)
		WHERE RN BETWEEN #{start} AND #{end}	
</select>
<resultMap type="Board" id="BoardVO">
<result column="board_no" property="board_no"/>
<result column="board_sub" property="board_sub"/>
<result column="board_content" property="board_content"/>
<result column="board_date" property="board_date"/>
<result column="board_board" property=" board_board"/>
<result column="mem_id" property="mem_id"/>
</resultMap>

<select id="countReply" resultType="int">
select count(*) from reply where board_no=#{board_no}
</select>

<!-- 총 공지 수 출력 -->
<select resultType="int" id="countNotice">SELECT COUNT(*) FROM board where board_board='notice' </select>

<!-- 페이징 처리 후 공지 조회 -->
<select id="selectNotice" resultMap="selectNotice">
SELECT *FROM (SELECT ROWNUM RN, A.*FROM 
(SELECT * FROM BOARD where board_board='notice' order by board_no desc) A)
WHERE RN BETWEEN #{start} AND #{end} </select>
<resultMap id="selectNotice" type="kr.co.ezenac.board.model.vo.BoardVO">
<result property="board_no" column="BOARD_NO"/>
<result property="board_sub" column="BOARD_SUB"/>
<result property="board_content" column="BOARD_CONTENT"/>
<result property="board_date" column="BOARD_DATE"/>
<result property="board_board" column="BOARD_BOARD"/>
<result property="mem_id" column="MEM_ID"/>
</resultMap>

<!-- 게시글 하나의 정보 -->
<select id="selectOneBoard" resultMap="selectOneBoard">SELECT * FROM BOARD where board_no=#{board_no} </select>

<resultMap id="selectOneBoard" type="kr.co.ezenac.board.model.vo.BoardVO">
<result property="board_no" column="BOARD_NO"/>
<result property="board_sub" column="BOARD_SUB"/>
<result property="board_content" column="BOARD_CONTENT"/>
<result property="board_date" column="BOARD_DATE"/>
<result property="board_board" column="BOARD_BOARD"/>
<result property="mem_id" column="MEM_ID"/>
</resultMap>
</mapper>